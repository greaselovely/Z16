<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <title>Home Directories Gone Wild</title>
    <meta name="viewport" content="width=device-width"/>
    <meta http-equiv="X-UA-Compatible" content="chrome=1"/>
    
    <!-- Use relative_url filter so paths work in GitHub Pages -->
    <link rel="stylesheet" href="/styles/main.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@48,400,1,0"/>
    <script src="/scripts/theme.js"></script>

    <link rel="icon" href="/images/favicon.ico" type="image/x-icon"/>
    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon"/>
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="/"><img src="/images/pancakes.png" alt="pancake"></a> Shayne Sivley</h1>
        <p>Welcome to PANW Cakes</p>
        <p>Cyberecurity, Automation, and Cakes</p>
        <p>The Cake is a Lie</p>
        <p class="view">
          <a href="https://github.com/greaselovely/" target="_blank"> View my Projects on GitHub <small>greaselovely</small></a>
          <a href="http://kineticlull.com/" target="_blank"> My External Dynamic List Manager <small>KineticLull</small></a>
        </p>
      </header>
      
      <!-- Main content area where individual page content will be injected -->
      <main>
        <section>
          <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Home Directories Gone Wild</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2009-07-08T16:07:37-06:00" itemprop="datePublished">Jul 8, 2009
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Ok, Windows Admins who don’t know this, listen up.</p>

<p>You know the way that you add home directories to user accounts in Active Directory? 
Yeah, you’re not doing it right!</p>

<p>I have to say that I cannot stand it when admins don’t read AT LEAST the bare minimum of basic Windows / Active Directory management. I cannot hold it back anymore, I feel like I’m gonna lose my mind. Everytime I go to a customer site and see where some chucklehead has added the home directory in some stupid way (see below).</p>

<ol>
  <li>Create a new directory, either by calling the same as the username or something close.</li>
  <li>Share out this directory as a normal share or a hidden share</li>
  <li>Change NTFS permissions manually, or better yet, not at all.</li>
  <li>Open the user account properties and put in the drive letter and UNC path to this new share.</li>
</ol>

<p>Ok, so now if you do anything in your life the correct way, do this (bare minimum):</p>

<ol>
  <li>Create a single directory under whatever path you like (eg…D:\Home or D:\Users)</li>
  <li>Share this new directory, usually a hidden share (home$ or users$)</li>
  <li>Allow SYSTEM and Domain Admins Full Control and Domain Users Read Only</li>
  <li>Open user account properties and add the drive letter and the UNC path:
  (eg…\server\share\%username%)</li>
  <li>You can literally use the %username% variable if you wanna.</li>
</ol>

<p>Step 4 is the only step you have to do once you have created the initial share. What happens when you do step 4? Good question. It will create the home directory for you in the share specified and it will apply proper NTFS permissions with the user account with Full Control and remove the inheritance flag.
If you have a template user account and you copy it, it will create the home directory and apply security properly for you as well based on the username.</p>

<p>From now on, do this or I will come after you with a shovel and a hayfork.</p>

<hr />

<p>Other Posts You May Want To Cover in Syrup:</p>

  </div><a class="u-url" href="/microsoft/windows/2009/07/08/windows-home-dir-gone-wild.html" hidden></a>
</article>

          <ul class="posts">
            
              <li>
                <!-- <span class="post-date">2009-07-08</span><br> -->
                <a href="/microsoft/windows/2009/07/08/windows-home-dir-gone-wild.html">Home Directories Gone Wild</a>
              </li>
            
              <li>
                <!-- <span class="post-date">2009-05-05</span><br> -->
                <a href="/juniper/netscreen/2009/05/05/screenos-oids-for-cpu-and-sessions.html">ScreenOS OIDs for CPU and Sessions</a>
              </li>
            
              <li>
                <!-- <span class="post-date">2008-06-19</span><br> -->
                <a href="/random/2008/06/19/devaluation-of-technical-certifications-in-progress.html">Devaluation of Technical Certifications In Progress</a>
              </li>
            
              <li>
                <!-- <span class="post-date">2008-02-26</span><br> -->
                <a href="/switch/2008/02/26/entry-level-switch-throughput-comparison.html">Entry Level Switch Throughput Comparison</a>
              </li>
            
              <li>
                <!-- <span class="post-date">2007-11-13</span><br> -->
                <a href="/blog/2007/11/13/t1-utilization-questions.html">T1 Utilization Questions...</a>
              </li>
            
              <li>
                <!-- <span class="post-date">2007-11-08</span><br> -->
                <a href="/crisco/2007/11/08/cisco-catalyst-5509-coffee-table.html">Cisco Catalyst 5509 Coffee Table</a>
              </li>
            
              <li>
                <!-- <span class="post-date">2007-09-24</span><br> -->
                <a href="/juniper/netscreen/2007/09/24/juniper-netscreen-dual-wan.html">NetScreen SSG 20 Dual WAN</a>
              </li>
            
              <li>
                <!-- <span class="post-date">2007-09-23</span><br> -->
                <a href="/smtp/email/2007/09/23/um-ehlo.html">Um, EHLO?!</a>
              </li>
            
          </ul>
        </section>
      </main>
      <footer>
        <p>
          <button class="material-symbols-sharp" id="theme-toggle" title="Toggle dark mode" onclick="toggleDarkMode()"></button>
        </p>
      </footer>
    </div>
    
    <script src="/scripts/scale.fix.js"></script>
  </body>
</html>
